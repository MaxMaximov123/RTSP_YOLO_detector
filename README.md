# YOLO11 RTSP Detector

## Описание

Этот проект предназначен для подключения к видеокамере по протоколу RTSP, получения изображений с камеры, распознавания объектов с помощью модели YOLO11, отображения результатов в веб-интерфейсе и отправки уведомлений в Telegram-бот при обнаружении объектов.

## Основные возможности

- Подключение к RTSP-камере и получение видеопотока.
- Детекция объектов на изображениях с помощью модели YOLO11.
- Визуализация найденных объектов в реальном времени через веб-интерфейс.
- Отправка изображений с обнаруженными объектами в Telegram-бот.

## Структура проекта

```
.
├── convert_onnx.py         # Скрипт для конвертации моделей в формат ONNX
├── Dockerfile              # Docker-образ для запуска проекта
├── main.py                 # Основной серверный скрипт
├── onnx.py                 # Модуль для работы с ONNX-моделью YOLO11
├── README.md               # Описание проекта
├── requirements.txt        # Зависимости Python
├── yolo11m.pt              # Весовые файлы модели YOLO11 (разные варианты)
├── yolo11n.onnx
├── yolo11n.pt
├── yolo11s.pt
├── yolo11x.pt
├── yolov8n.pt
└── static/
    └── index.html          # Веб-интерфейс для отображения видео
```

## Быстрый старт

### 1. Установка зависимостей

Установите необходимые библиотеки:

```sh
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте файл `.env` (если требуется) и укажите параметры подключения к RTSP-камере и Telegram-боту:

```
RTSP_URL=rtsp://<user>:<password>@<ip>:<port>/path
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

### 3. Запуск проекта

```sh
python main.py
```

### 4. Открытие веб-интерфейса

Перейдите в браузере по адресу [http://localhost:3000](http://localhost:3000) для просмотра видеопотока с детекцией объектов.

## Использование Docker

Для запуска проекта в Docker выполните:

```sh
docker build -t yolo11-rtsp .
docker run --env-file .env -p 3000:3000 yolo11-rtsp
```

## Основные файлы

- [`main.py`](main.py) — основной сервер, обрабатывающий видеопоток, детекцию и отправку в Telegram.
- [`onnx.py`](onnx.py) — модуль для работы с моделью YOLO11 в формате ONNX.
- [`convert_onnx.py`](convert_onnx.py) — скрипт для конвертации PyTorch-моделей в ONNX.
- [`static/index.html`](static/index.html) — веб-интерфейс для отображения видео с детекцией.

## Как это работает

1. Сервер подключается к RTSP-камере и получает видеопоток.
2. Кадры обрабатываются моделью YOLO11 для поиска объектов.
3. Найденные объекты отображаются на изображении (bounding boxes).
4. Веб-интерфейс отображает обработанное видео в реальном времени.
5. При обнаружении объектов кадр отправляется в Telegram-бот.

**Примечание:** Для корректной работы требуется наличие весов модели YOLO11 в формате `.pt` или `.onnx` в корне проекта.
````